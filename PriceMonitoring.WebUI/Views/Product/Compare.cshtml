@model List<Product>



<h5>Compare page</h5>


<form method="post">
    <input type="search" class="form-control" name="q" placeholder="Product name" />
    <button type="submit" class="btn btn-primary" asp-action="Search"> Search </button>
</form>





@if (Model != null)
{
    <div class="row">
        @foreach (var product in Model)
        {
            <div class="col-md-3">
                <form method="post">
                    <input type="hidden" value="@product.Id" name="id" />
                    <img src="@product.Image" alt="Product Image" />
                    <h5>@product.Name</h5>
                    <button type="submit" class="btn btn-success" asp-action="AddToCompare">Add to compare</button>
                </form>
            </div>
        }
    </div>
}



@section Scripts
{
    <script src="https://code.highcharts.com/highcharts.js"></script>
    <script src="https://code.highcharts.com/modules/series-label.js"></script>
    <script src="https://code.highcharts.com/modules/exporting.js"></script>
    <script src="https://code.highcharts.com/modules/export-data.js"></script>
    <script src="https://code.highcharts.com/modules/accessibility.js"></script>

    <figure class="highcharts-figure">
        <div id="container"></div>

    </figure>

    <script>


        var prices =  @Html.Raw(ViewData["Prices"]);
        var dates =  @Html.Raw(ViewData["Dates"]);



        Highcharts.chart('container', {

            title: {
                text: 'Product price changing, 2021'
            },

            subtitle: {
                text: 'Market: Migros'
            },

            yAxis: {
                title: {
                    text: 'Price (TRY)'
                }
            },

            xAxis: {


                categories: dates
            },

            legend: {
                layout: 'vertical',
                align: 'right',
                verticalAlign: 'middle'
            },

            plotOptions: {
                series: {
                    label: {
                        connectorAllowed: false,

                    }
                }
            },

            series: @Html.Raw(ViewData["Products"])

                ,

                responsive: {
                rules: [{
                condition: {
                maxWidth: 500
                },
                chartOptions: {
                legend: {
                layout: 'horizontal',
                align: 'center',
                verticalAlign: 'bottom'
                }
                }
                }]
                }

                });
    </script>

}



